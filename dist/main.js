!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const r=function(e){return function(e){var t=Math.floor((new Date-e)/1e3),n=t/31536e3;if(n>1)return Math.floor(n)+" years ago";if((n=t/2592e3)>1)return Math.floor(n)+" months ago";if((n=t/86400)>1)return Math.floor(n)+" days ago";if((n=t/3600)>1)return Math.floor(n)+" hours ago";if((n=t/60)>1)return Math.floor(n)+" minutes ago";return Math.floor(t)+" seconds ago"}(new Date(1e3*e))};function o(e,t,n){var r=new XMLHttpRequest;r.addEventListener("load",e=>t({event:e,index:n})),r.open("GET","https://hacker-news.firebaseio.com/v0/item/"+e+".json"),r.send()}const s=function(e,t){const n=document.createElement("div");n.setAttribute("class","story-row"),n.innerHTML=(({by:e,descendants:t,id:n,kids:o,score:s,time:a,title:i,type:l,url:c},u)=>{let d=null;try{d=new URL(c)}catch(e){console.log("bad url")}return`<div class="title">\n  <span class="rank">${u+1}.</span>\n  <a ${d?"href="+d.href:""} target="_blank">${i}</a> ${d?`<a class="small-text small-link" target="_blank" href="https://${d.hostname}">(${d.hostname})</a>`:""}\n  </div>\n          <div class="container-substory small-text">\n          <div class="score">${s} points</div>\n          <div class="by"> by ${e}</div>\n          <div class="since">${r(a)}</div>\n          ${t>0?`| <a class="small-link comments">${t} comments</a>`:""}\n  </div>`})(e,t);const s=n.getElementsByClassName("comments");return s.length&&s[0].addEventListener("click",()=>{!function(e){const t=[];e.kids?e.kids.forEach((e,n)=>{const r=new Promise(t=>{o(e,t,n)});t.push(r)}):console.error("error no kids")}(e)}),n},a=document.getElementById("spinner");function i({event:e,index:t}){var n=JSON.parse(e.currentTarget.response.replace(/<[^>]+>/g,""));document.querySelector("#items-list").appendChild(s(n,t))}let l,c=[];function u(e){c=JSON.parse(e.currentTarget.response),f()}!function(e){var t=new XMLHttpRequest;t.addEventListener("load",e),t.open("GET","https://hacker-news.firebaseio.com/v0/topstories.json"),t.send()}(u),l=document.getElementById("more-button"),l.addEventListener("click",f);let d=0;function f(){a.style.display="block";const e=[];for(let t=0;t<10&&d+t<c.length;t++){const n=new Promise(e=>{o(c[d+t],e,d+t)});e.push(n)}Promise.all(e).then(e=>{e.forEach(i),a.style.display="none"}),d+=10,console.log(d+" "+c.length),d>=c.length&&(l.disabled=!0,l.innerText="no more top stories")}}]);