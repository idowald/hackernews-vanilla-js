!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const r=function(e){return function(e){var t=Math.floor((new Date-e)/1e3),n=t/31536e3;if(n>1)return Math.floor(n)+" years ago";if((n=t/2592e3)>1)return Math.floor(n)+" months ago";if((n=t/86400)>1)return Math.floor(n)+" days ago";if((n=t/3600)>1)return Math.floor(n)+" hours ago";if((n=t/60)>1)return Math.floor(n)+" minutes ago";return Math.floor(t)+" seconds ago"}(new Date(1e3*e))};function s(e,t,n){var r=new XMLHttpRequest;r.addEventListener("load",e=>t({event:e,index:n})),r.open("GET","https://hacker-news.firebaseio.com/v0/item/"+e+".json"),r.send()}function o(e){const t=[];e.forEach((e,n)=>{const r=new Promise(t=>{s(e,t,n)});t.push(r)}),Promise.all(t).then(e=>{e.forEach(e=>function({event:e}){const t=JSON.parse(e.currentTarget.response.replace(/<[^>]+>/g,"")),n=document.createElement("div");n.setAttribute("class","comment"),n.setAttribute("id","item-"+t.id),n.innerHTML=(({by:e,kids:t,text:n,time:s})=>`<div class="comment-header small-text">\n<span class="comment-by">${e}</span>\n<span class="comment-time">${r(s)}</span>\n</div>\n<div class="comment-text">${n}</div>\n${t?`<a class="small-link comments">${t.length} comments</a>`:""}\n`)(t);const s=n.getElementsByClassName("comments");if(s.length){const e=()=>{s[0].removeEventListener("click",e),o(t.kids)};s[0].addEventListener("click",e)}document.getElementById("item-"+t.parent).appendChild(n)}(e))})}const i=function(e,t){const n=document.createElement("div");n.setAttribute("id","item-"+e.id),n.setAttribute("class","story-row"),n.innerHTML=(({by:e,descendants:t,id:n,kids:s,score:o,time:i,title:a,type:c,url:l},u)=>{let d=null;try{d=new URL(l)}catch(e){console.log("bad url")}return`<div class="title">\n  <span class="rank">${u+1}.</span>\n  <a ${d?"href="+d.href:""} target="_blank">${a}</a> ${d?`<a class="small-text small-link" target="_blank" href="https://${d.hostname}">(${d.hostname})</a>`:""}\n  </div>\n          <div class="container-substory small-text">\n          <div class="score">${o} points</div>\n          <div class="by"> by ${e}</div>\n          <div class="since">${r(i)}</div>\n          ${t>0?`| <a class="small-link comments">${t} comments</a>`:""}\n  </div>`})(e,t);const s=n.getElementsByClassName("comments");if(s.length){const t=()=>{s[0].removeEventListener("click",t),function(e){o(e.kids)}(e)};s[0].addEventListener("click",t)}return n},a=document.getElementById("spinner");function c({event:e,index:t}){var n=JSON.parse(e.currentTarget.response.replace(/<[^>]+>/g,""));document.querySelector("#items-list").appendChild(i(n,t))}let l,u=[];function d(e){u=JSON.parse(e.currentTarget.response),f()}!function(e){var t=new XMLHttpRequest;t.addEventListener("load",e),t.open("GET","https://hacker-news.firebaseio.com/v0/topstories.json"),t.send()}(d),l=document.getElementById("more-button"),l.addEventListener("click",f);let m=0;function f(){a.style.display="block";const e=[];for(let t=0;t<2&&m+t<u.length;t++){const n=new Promise(e=>{s(u[m+t],e,m+t)});e.push(n)}Promise.all(e).then(e=>{e.forEach(c),a.style.display="none"}),m+=2,m>=u.length&&(l.disabled=!0,l.innerText="no more top stories")}}]);