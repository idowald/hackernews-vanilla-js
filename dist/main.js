!function(e){var t={};function n(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(s,o,function(t){return e[t]}.bind(null,o));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const s=document.getElementById("spinner");function o(e,t,n){const s=new XMLHttpRequest;s.addEventListener("load",e=>t({event:e,index:n})),s.open("GET","https://hacker-news.firebaseio.com/v0/item/"+e+".json"),s.send()}const r=function(e){return function(e){const t=Math.floor((new Date-e)/1e3);let n=t/31536e3;if(n>1)return Math.floor(n)+" years ago";if(n=t/2592e3,n>1)return Math.floor(n)+" months ago";if(n=t/86400,n>1)return Math.floor(n)+" days ago";if(n=t/3600,n>1)return Math.floor(n)+" hours ago";if(n=t/60,n>1)return Math.floor(n)+" minutes ago";return Math.floor(t)+" seconds ago"}(new Date(1e3*e))};function i(e){const t=[];e.forEach((e,n)=>{const s=new Promise(t=>{o(e,t,n)});t.push(s)}),Promise.all(t).then(e=>{e.forEach(e=>function({event:e}){const t=JSON.parse(e.currentTarget.response.replace(/<[^>]+>/g,"")),n=document.createElement("div");n.setAttribute("class","comment"),n.setAttribute("id","item-"+t.id),n.innerHTML=function({by:e,kids:t,text:n,time:s}){return`<div class="comment-header small-text">\n<span class="comment-by">${e}</span>\n<span class="comment-time">${r(s)}</span>\n</div>\n<div class="comment-text">${n}</div>\n${t?`<a class="small-link comments">${t.length} comments</a>`:""}\n`}(t);const s=n.getElementsByClassName("comments");if(s.length){const e=()=>{s[0].removeEventListener("click",e),i(t.kids)};s[0].addEventListener("click",e)}document.getElementById("item-"+t.parent).appendChild(n)}(e))})}function a({event:e,index:t}){const n=JSON.parse(e.currentTarget.response.replace(/<[^>]+>/g,""));document.querySelector("#items-list").appendChild(function(e,t){const n=document.createElement("div");n.setAttribute("id","item-"+e.id),n.setAttribute("class","story-row"),n.innerHTML=function({by:e,descendants:t,id:n,kids:s,score:o,time:i,title:a,type:c,url:l},u){let d=null;try{d=new URL(l)}catch(e){console.log("bad url")}return`<div class="title">\n  <span class="rank">${u+1}.</span>\n  <a ${d?"href="+d.href:""} target="_blank">${a}</a> ${d?`<a class="small-text small-link" target="_blank" href="https://${d.hostname}">(${d.hostname})</a>`:""}\n  </div>\n          <div class="container-substory small-text">\n          <div class="score">${o} points</div>\n          <div class="by"> by ${e}</div>\n          <div class="since">${r(i)}</div>\n          ${t>0?`| <a class="small-link comments">${t} comments</a>`:""}\n  </div>`}(e,t);const s=n.getElementsByClassName("comments");if(s.length){const t=()=>{s[0].removeEventListener("click",t),function(e){i(e.kids)}(e)};s[0].addEventListener("click",t)}return n}(n,t))}let c,l=[];function u(e){l=JSON.parse(e.currentTarget.response),m()}!function(e){const t=new XMLHttpRequest;t.addEventListener("load",e),t.open("GET","https://hacker-news.firebaseio.com/v0/topstories.json"),t.send()}(u),c=document.getElementById("more-button"),c.addEventListener("click",m);let d=0;function m(){s.style.display="block";const e=[];for(let t=0;t<15&&d+t<l.length;t++){const n=new Promise(e=>{o(l[d+t],e,d+t)});e.push(n)}Promise.all(e).then(e=>{e.forEach(a),s.style.display="none"}),d+=15,d>=l.length&&(c.disabled=!0,c.innerText="no more top stories")}}]);